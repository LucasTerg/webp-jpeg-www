import"./assets/modulepreload-polyfill-B5Qt9EMX.js";/* empty css                      */async function m(){const r=document.querySelectorAll("[data-load]");for(const n of r){const o=n.getAttribute("src");if(o)try{const e=await fetch(o);if(!e.ok){console.error(`Nie udało się załadować ${o}: ${e.status}`),n.innerHTML=`<p>Błąd ładowania: ${o}</p>`;continue}const d=await e.text();n.innerHTML=d;const s=n.getAttribute("data-icon-path");if(s){const a=n.querySelector("[data-icon]");a&&a.setAttribute("src",s)}}catch(e){console.error(`Błąd ładowania ${o}:`,e),n.innerHTML=`<p>Błąd ładowania: ${o}</p>`}}}document.addEventListener("DOMContentLoaded",()=>{m();const r=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",r),document.body.addEventListener("click",n=>{if(n.target.closest("#theme-toggle-main")){const e=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)}})});document.getElementById("upload-form").addEventListener("submit",async r=>{r.preventDefault();const n=document.getElementById("file-input"),o=document.getElementById("file-name");if(!n.files.length){alert("Proszę wybrać zdjęcia!");return}const e=new FormData;Array.from(n.files).forEach(t=>e.append("images",t)),e.append("newName",o.value);const d=document.getElementById("progress-container"),s=document.getElementById("progress-bar"),a=document.getElementById("progress-text");d.style.display="block",s.style.width="0%",a.textContent="Rozpoczynanie przetwarzania...";try{const t=await fetch("http://localhost:3000/upload",{method:"POST",body:e});if(t.ok){const c=t.headers.get("content-type");if(c&&c.includes("application/json")){const l=await t.json();console.log("Server response:",l),a.textContent="Przetwarzanie zakończone!",progressDetails.textContent="Serwer zwrócił dane JSON."}else{const l=await t.blob(),i=document.getElementById("download-link");i.href=URL.createObjectURL(l),i.style.display="inline-block",i.textContent="Pobierz spakowane zdjęcia",i.download="cropped_images.zip"}a.textContent="Przetwarzanie zakończone!"}else{const c=await t.text();throw new Error(`Błąd serwera: ${t.status} ${t.statusText}
${c}`)}}catch(t){console.error("Błąd:",t),alert(`Wystąpił błąd: ${t.message}`),a.textContent="Wystąpił błąd podczas przetwarzania."}});
//# sourceMappingURL=index.js.map
