import"./assets/modulepreload-polyfill-B5Qt9EMX.js";let n=[];const c=document.getElementById("file-dropzone"),p=document.getElementById("file-input"),g=document.getElementById("file-list"),h=document.getElementById("clear-list"),E=document.getElementById("execute-btn"),u=document.getElementById("console-log"),w=document.getElementById("theme-toggle"),r=document.getElementById("base-name"),y=document.getElementById("start-number"),z=document.getElementById("opt-crop"),L=document.getElementById("opt-resize");document.getElementById("opt-bg-remove");function a(e){const t=document.createElement("p");t.textContent=`> ${e}`,u.appendChild(t),u.scrollTop=u.scrollHeight}const v=e=>{const t={ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"E",Ł:"L",Ń:"N",Ó:"O",Ś:"S",Ź:"Z",Ż:"Z"};let o=e.replace(/[ąćęłńóśźżĄĆĘŁŃÓŚŹŻ]/g,l=>t[l]);return o=o.replace(/[^a-zA-Z0-9]/g,"-"),o=o.replace(/-+/g,"-"),o=o.replace(/^-+|-+$/g,""),o};r.addEventListener("mouseenter",async()=>{if(r.value.trim()==="")try{const e=await navigator.clipboard.readText();if(e){const t=v(e);t&&(r.value=t,r.classList.add("flash-input"),setTimeout(()=>r.classList.remove("flash-input"),500),a(`Wklejono ze schowka: ${t}`))}}catch{}});r.addEventListener("input",()=>{const e=r.value,t=v(e);e!==t&&(r.value=t)});function i(){g.innerHTML="",n.forEach((e,t)=>{const o=document.createElement("li");o.className="file-item",o.innerHTML=`
      <span class="file-info">[${t+1}] ${e.file.name} (${(e.file.size/1024).toFixed(1)} KB)</span>
      <div class="file-controls">
        <button class="btn btn-sm" onclick="window.moveUp(${t})">▲</button>
        <button class="btn btn-sm" onclick="window.moveDown(${t})">▼</button>
        <button class="btn btn-sm" onclick="window.removeFile(${t})" style="color:var(--error-color); border-color:var(--error-color);">X</button>
      </div>
    `,g.appendChild(o)})}function b(e){Array.from(e).forEach(t=>{t.type.startsWith("image/")?(n.push({file:t,id:Date.now()+Math.random()}),a(`Dodano: ${t.name}`)):a(`BŁĄD: ${t.name} nie jest obrazem.`)}),i()}window.moveUp=e=>{e>0&&([n[e-1],n[e]]=[n[e],n[e-1]],i())};window.moveDown=e=>{e<n.length-1&&([n[e+1],n[e]]=[n[e],n[e+1]],i())};window.removeFile=e=>{a(`Usunięto: ${n[e].file.name}`),n.splice(e,1),i()};c.addEventListener("click",()=>p.click());p.addEventListener("change",e=>{b(e.target.files),p.value=""});c.addEventListener("dragover",e=>{e.preventDefault(),c.style.borderColor="var(--accent-color)"});c.addEventListener("dragleave",e=>{e.preventDefault(),c.style.borderColor="var(--border-color)"});c.addEventListener("drop",e=>{e.preventDefault(),c.style.borderColor="var(--border-color)",b(e.dataTransfer.files)});h.addEventListener("click",()=>{n=[],i(),a("Lista wyczyszczona.")});E.addEventListener("click",async()=>{if(n.length===0){a("BŁĄD: Brak plików do przetworzenia.");return}const e=r.value.trim()||"image",t=parseInt(y.value)||1;a("Rozpoczynanie procedury uploadu...");const o=new FormData;n.forEach(l=>{o.append("images",l.file)}),o.append("newName",e),o.append("startNumber",t),o.append("optCrop",z.checked),o.append("optResize",L.checked);try{const d=await fetch("http://localhost:3000/upload-tools",{method:"POST",body:o});if(d.ok){a("SUKCES: Pliki przetworzone.");const m=await d.blob(),f=window.URL.createObjectURL(m),s=document.createElement("a");s.href=f,s.download="processed.zip",document.body.appendChild(s),s.click(),s.remove(),a("Rozpoczęto pobieranie archiwum.")}else{const m=await d.text();a(`BŁĄD SERWERA: ${m}`)}}catch(l){a(`BŁĄD SIECI: ${l.message}`)}});const I=localStorage.getItem("theme")||"dark";document.documentElement.setAttribute("data-theme",I);w.addEventListener("click",()=>{const t=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),a(`Zmiana motywu na: ${t}`)});
//# sourceMappingURL=tools.js.map
